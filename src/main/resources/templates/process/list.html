<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>工作流程</title>
    <!--
        静态资源的导入，如果使用thymeleaf的方式，就可以是@{/../..}的形式
        如果是传统方式形式可以为 http://localhost:8080/lab/../..的形式
        其实原理就是到应用的根路径下即可
     -->
    <script src="../js/jquery/jquery-3.5.1.min.js" th:src="@{/js/jquery/jquery-3.5.1.min.js}"></script>
    <script src="../js/test.js" th:src="@{/js/test.js}"></script>
</head>
<body>
    <h3 align="center">列出所有可以部署的流程</h3>
    <hr color="red">
    <ul>
        <li>
            <b>请假流程</b>
            <span>holiday-request.bpmn20.xml</span>
            <button onclick="deploy(this)">发布</button>
        </li>
        <li>
            <b>出差流程</b>
            <span>business-request.bpmn20.xml</span>
            <button onclick="deploy(this)">发布</button>
        </li>
        <li>
            <b>报销流程</b>
            <span>claim-request.bpmn20.xml</span>
            <button onclick="deploy(this)">发布</button>
        </li>
    </ul>
    <script>
        function deploy(obj){
            //-- 1. 获取部署文件名
            var processFile = $(obj).prev().text();
            //-- 2. 发送部署请求
            $.post("http://localhost:8080/lab/process/deploy", { fileName: processFile } , function(data){
                alert(data);
            });
        }
    </script>
</body>
</html>